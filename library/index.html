<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Celestial Library of 231 Gates · LuminaNexus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Shared site styles -->
    <link rel="stylesheet" href="../assets/luminanexus.css" />

    <style>
      /* Page-specific polish (uses your shared palette) */

      .celestial-hero-grid {
        display: grid;
        gap: 1.75rem;
        grid-template-columns: minmax(0, 2fr) minmax(0, 1.4fr);
        align-items: stretch;
      }

      @media (max-width: 900px) {
        .celestial-hero-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .hero-panel {
        padding: 1.75rem 2rem;
        border-radius: 1rem;
        background: radial-gradient(circle at top left, #262f6b, #111827);
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.55);
        border: 1px solid rgba(255, 255, 255, 0.08);
        color: #f9fafb;
      }

      .hero-panel h1 {
        font-size: clamp(1.9rem, 2.4vw, 2.3rem);
        margin-bottom: 0.75rem;
        color: #ffffff;
      }

      .hero-panel p {
        margin: 0.25rem 0;
        line-height: 1.6;
        color: #e5e7eb;
      }

      .eyebrow {
        font-size: 0.8rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        opacity: 0.9;
        margin-bottom: 0.35rem;
        color: #facc6b;
      }

      .hero-chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        margin-top: 0.6rem;
      }

      .hero-chip {
        font-size: 0.7rem;
        padding: 0.2rem 0.55rem;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        opacity: 0.95;
        background: radial-gradient(circle at top, rgba(251, 191, 36, 0.22), transparent);
        color: #fef9c3;
      }

      .hero-panel.secondary {
        background: radial-gradient(circle at top right, #3b256b, #111827);
        color: #f9fafb;
      }

      .hero-panel.secondary h2 {
        font-size: 1rem;
        margin-bottom: 0.6rem;
        color: #ffffff;
      }

      .hero-panel.secondary ol {
        margin-left: 1rem;
        padding-left: 0.4rem;
      }

      .hero-panel.secondary li {
        margin: 0.2rem 0 0.35rem;
        line-height: 1.5;
        color: #e5e7eb;
      }

      .hero-badge {
        font-size: 0.75rem;
        margin-bottom: 0.4rem;
        opacity: 0.9;
        color: #facc6b;
        letter-spacing: 0.16em;
        text-transform: uppercase;
      }

      .gate-toolbar {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        gap: 0.75rem;
        margin: 2rem 0 0.75rem;
      }

      .gate-toolbar-left {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
      }

      .gate-count {
        font-size: 0.8rem;
        opacity: 0.9;
        color: #e5e7eb;
      }

      .gate-filter {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: #e5e7eb;
      }

      .gate-filter select {
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.9);
        border-radius: 999px;
        color: #f9fafb;
        padding: 0.35rem 0.9rem;
        font-size: 0.85rem;
      }

      .gate-filter select:focus {
        outline: none;
        box-shadow: 0 0 0 1px rgba(248, 250, 252, 0.7);
      }

      .gate-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap: 0.9rem;
        margin-bottom: 2.5rem;
      }

      .gate-card {
        position: relative;
        padding: 0.95rem 1rem;
        border-radius: 0.9rem;
        background: linear-gradient(145deg, #111827, #1f2937);
        border: 1px solid rgba(148, 163, 184, 0.7);
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.75);
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        color: #e5e7eb;
      }

      .gate-card-header {
        display: flex;
        justify-content: space-between;
        gap: 0.5rem;
        align-items: baseline;
      }

      .gate-title {
        font-size: 0.98rem;
        font-weight: 600;
        color: #f9fafb;
      }

      .gate-key-hebrew {
        font-size: 0.92rem;
        opacity: 0.95;
        color: #e5e7eb;
      }

      .gate-key-latin {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        opacity: 0.9;
        color: #c7d2fe;
      }

      .gate-theme {
        font-size: 0.8rem;
        opacity: 0.95;
        color: #e5e7eb;
      }

      .gate-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 0.35rem;
        gap: 0.5rem;
      }

      .gate-tag {
        font-size: 0.75rem;
        opacity: 0.9;
        color: #cbd5f5;
      }

      .gate-link {
        font-size: 0.75rem;
        text-decoration: none;
        padding: 0.22rem 0.6rem;
        border-radius: 999px;
        border: 1px solid rgba(248, 250, 252, 0.8);
        background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.25), rgba(37, 99, 235, 0.3));
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        white-space: nowrap;
        color: #0f172a;
      }

      .gate-link span {
        opacity: 0.95;
      }

      .gate-link svg {
        width: 0.7rem;
        height: 0.7rem;
      }

      .gate-link:hover {
        filter: brightness(1.08);
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="inner header-inner">
        <div class="brand">
          <a href="/" class="brand-mark">Luminanexus</a>
          <span class="brand-tagline">A nexus of Torah, light, and learning</span>
        </div>
        <nav class="main-nav">
          <a href="/">Home</a>
          <a href="/chavruta/">ChavrutaGPT</a>
          <a href="/library/" class="is-active">Celestial Library</a>
          <a href="/sefaria-library.html">Sefaria</a>
          <a href="/flipbooks.html">Flip Books</a>
        </nav>
      </div>
    </header>

    <main class="page">
      <div class="inner">
        <section class="celestial-hero-grid">
          <div class="hero-panel">
            <div class="eyebrow">The Celestial Library of 231 Gates</div>
            <h1>A living archive of letter-gates</h1>
            <p>
              Within this Library, the 22 Hebrew letters are treated as living lights.
              Every unique pairing of two letters forms a gate — one of the
              <strong>231 gates (שערי אל״ף־בי״ת)</strong> through which meaning, story,
              and consciousness can flow.
            </p>
            <p>
              Here you can browse all 231 gates, filter them by the first letter, and
              begin to feel how the alphabet becomes a constellation of paths.
              Some gates already carry whispered themes; others are patiently
              waiting to be written.
            </p>
            <p>
              As the Celestial Library grows, each gate will gather its own essays,
              meditations, study sheets, and links out to classic sources on
              <strong>Sefaria</strong>. For now, the named gates below offer a first
              weaving of Tanakh, Midrash, and letter-midrash.
            </p>
            <div class="hero-chip-row">
              <span class="hero-chip">22 letters</span>
              <span class="hero-chip">231 gates</span>
              <span class="hero-chip">Growing themes</span>
            </div>
          </div>

          <aside class="hero-panel secondary">
            <div class="hero-badge">How to walk this Library</div>
            <h2>Choose a gate · Follow a source · Let a theme open</h2>
            <ol>
              <li>
                <strong>Filter by first letter</strong> or leave it on “All 231 gates”.
              </li>
              <li>
                <strong>Click on any gate title</strong> in your mind and notice the
                letters, their sound, and any feeling the theme awakens.
              </li>
              <li>
                For named gates, use the
                <strong>“Open on Sefaria”</strong> button to jump to a suggested
                text — a first companion for that gate.
              </li>
              <li>
                Bring your own Torah: notes, reflections, questions, and
                connections that arise as you learn. This Library is a
                <strong>living Beit Midrash of letters</strong>.
              </li>
            </ol>
          </aside>
        </section>

        <section class="gate-toolbar" aria-label="Gate filters">
          <div class="gate-toolbar-left">
            <div class="gate-count" id="gate-count"></div>
            <div class="gate-count">
              Some gates are already named with themes and Sefaria links; the
              rest are waiting for future learning.
            </div>
          </div>

          <div class="gate-filter">
            <label for="filter-letter">Filter by first letter:</label>
            <select id="filter-letter">
              <option value="all">All 231 gates</option>
            </select>
          </div>
        </section>

        <section
          class="gate-grid"
          id="gate-grid"
          aria-live="polite"
          aria-label="Celestial Library gates"
        ></section>
      </div>
    </main>

    <footer class="site-footer">
      <div class="inner">
        <p class="footer-line">
          LuminaNexus.org — ChavrutaGPT, the Celestial Library of 231 Gates,
          and the Sefaria online study library, learning together.
        </p>
      </div>
    </footer>

    <script>
      // --- Letter definitions -------------------------------------------------

      const LETTERS = [
        { code: "aleph", latin: "Aleph", hebrew: "א" },
        { code: "bet", latin: "Bet", hebrew: "ב" },
        { code: "gimel", latin: "Gimel", hebrew: "ג" },
        { code: "dalet", latin: "Dalet", hebrew: "ד" },
        { code: "he", latin: "He", hebrew: "ה" },
        { code: "vav", latin: "Vav", hebrew: "ו" },
        { code: "zayin", latin: "Zayin", hebrew: "ז" },
        { code: "chet", latin: "Chet", hebrew: "ח" },
        { code: "tet", latin: "Tet", hebrew: "ט" },
        { code: "yod", latin: "Yod", hebrew: "י" },
        { code: "kaf", latin: "Kaf", hebrew: "כ" },
        { code: "lamed", latin: "Lamed", hebrew: "ל" },
        { code: "mem", latin: "Mem", hebrew: "מ" },
        { code: "nun", latin: "Nun", hebrew: "נ" },
        { code: "samekh", latin: "Samekh", hebrew: "ס" },
        { code: "ayin", latin: "Ayin", hebrew: "ע" },
        { code: "pe", latin: "Pe", hebrew: "פ" },
        { code: "tzadi", latin: "Tzadi", hebrew: "צ" },
        { code: "qof", latin: "Qof", hebrew: "ק" },
        { code: "resh", latin: "Resh", hebrew: "ר" },
        { code: "shin", latin: "Shin", hebrew: "ש" },
        { code: "tav", latin: "Tav", hebrew: "ת" }
      ];

      // --- Named gates: expanded list ----------------------------------------
      const namedGates = {
        "aleph-bet": {
          heading: "א־ב · First Shelter",
          theme:
            "Foundations of blessing — the first doorway where light begins to feel like home.",
          tag: "Creation of light, first home for blessing",
          sefariaUrl: "https://www.sefaria.org/Genesis.1.1-5",
          sefariaLabel: "Bereshit 1:1–5 · First Light"
        },
        "aleph-gimel": {
          heading: "א־ג · River of Giving",
          theme:
            "Where source overflows into streams, and giving becomes the shape of the land.",
          tag: "A river flowing from Eden",
          sefariaUrl: "https://www.sefaria.org/Genesis.2.10-14",
          sefariaLabel: "Bereshit 2:10–14 · The Four Rivers"
        },
        "bet-gimel": {
          heading: "ב־ג · Hidden Understanding",
          theme:
            "Blessing wrapped around wisdom, like a house that secretly contains a library.",
          tag: "Seeking wisdom as hidden treasure",
          sefariaUrl: "https://www.sefaria.org/Proverbs.2.1-6",
          sefariaLabel: "Mishlei 2:1–6 · Treasures of Wisdom"
        },
        "bet-dalet": {
          heading: "ב־ד · Kadosh Axis",
          theme:
            "The house that opens into a doorway of awe, where holiness stands upright.",
          tag: "Vision of the Throne, turning toward holiness",
          sefariaUrl: "https://www.sefaria.org/Isaiah.6.1-3",
          sefariaLabel: "Yeshayahu 6:1–3 · Holy, Holy, Holy"
        },
        "gimel-dalet": {
          heading: "ג־ד · Whisper of Completion",
          theme:
            "The generous step that brings a journey to its quiet middle, never quite finished.",
          tag: "Trusting the path as it unfolds",
          sefariaUrl: "https://www.sefaria.org/Proverbs.3.5-6",
          sefariaLabel: "Mishlei 3:5–6 · Paths Made Straight"
        },
        "aleph-he": {
          heading: "א־ה · Breath Between Worlds",
          theme:
            "From silent point to soft breath — the moment when dust remembers it can live.",
          tag: "Breath of life given to Adam",
          sefariaUrl: "https://www.sefaria.org/Genesis.2.7",
          sefariaLabel: "Bereshit 2:7 · Breath of Life"
        },
        "aleph-vav": {
          heading: "א־ו · Ladder of Connection",
          theme:
            "A single letter of attachment, stretching like a ladder between earth-dreams and heaven.",
          tag: "Dream of a ladder joining realms",
          sefariaUrl: "https://www.sefaria.org/Genesis.28.12",
          sefariaLabel: "Bereshit 28:12 · Yaakov’s Ladder"
        },
        "dalet-he": {
          heading: "ד־ה · Door of Compassion",
          theme:
            "The doorway that opens not by force, but because compassion asks to come through.",
          tag: "Gates of righteousness, entering in song",
          sefariaUrl: "https://www.sefaria.org/Psalms.118.19-20",
          sefariaLabel: "Tehillim 118:19–20 · Open for Me the Gates"
        },
        "he-vav": {
          heading: "ה־ו · Small Word of Binding",
          theme:
            "A little letter that means ‘and’, teaching that holiness is always this-and-that together.",
          tag: "Oneness proclaimed, words bound together",
          sefariaUrl: "https://www.sefaria.org/Deuteronomy.6.4-9",
          sefariaLabel: "Devarim 6:4–9 · Shema Yisrael"
        },
        "vav-zayin": {
          heading: "ו־ז · Song Between Days",
          theme:
            "A bridge of sound where weekday and Shabbat lean toward each other and begin to sing.",
          tag: "Song for the day of Shabbat",
          sefariaUrl: "https://www.sefaria.org/Psalms.92.2-4",
          sefariaLabel: "Tehillim 92 · A Psalm for Shabbat"
        },
        "yod-kaf": {
          heading: "י־כ · Palm of Action",
          theme:
            "The smallest point reaching out into a palm, where intention becomes a hand that can help.",
          tag: "A hand that descends to redeem",
          sefariaUrl: "https://www.sefaria.org/Exodus.3.7-8",
          sefariaLabel: "Shemot 3:7–8 · I Have Seen Their Suffering"
        },
        "mem-nun": {
          heading: "מ־נ · Hidden River",
          theme:
            "Waters that begin in secrecy and widen into a flow that heals the edges of the world.",
          tag: "River flowing out from the Temple",
          sefariaUrl: "https://www.sefaria.org/Ezekiel.47.1-5",
          sefariaLabel: "Yechezkel 47:1–5 · The Deepening Waters"
        },
        "samekh-ayin": {
          heading: "ס־ע · Circle of Seeing",
          theme:
            "A gentle support around the eye, teaching us to stand still long enough to truly see.",
          tag: "Tasting and seeing that goodness is present",
          sefariaUrl: "https://www.sefaria.org/Psalms.34.9",
          sefariaLabel: "Tehillim 34:9 · Taste and See"
        },
        "shin-tav": {
          heading: "ש־ת · Seal of Flame",
          theme:
            "From first spark to final mark, love burns itself into the heart as an unbreakable seal.",
          tag: "Love as a flame of Hashem",
          sefariaUrl: "https://www.sefaria.org/Song_of_Songs.8.6",
          sefariaLabel: "Shir HaShirim 8:6 · A Flame of Y-H"
        }
      };

      // --- Build the 231 gates ------------------------------------------------
      function buildAllGates() {
        const gates = [];

        for (let i = 0; i < LETTERS.length; i++) {
          for (let j = i + 1; j < LETTERS.length; j++) {
            const a = LETTERS[i];
            const b = LETTERS[j];
            const key = `${a.code}-${b.code}`;
            const named = namedGates[key];

            gates.push({
              key,
              first: a,
              second: b,
              displayTitle: named?.heading || `${a.latin} → ${b.latin}`,
              hebrewPair: `${a.hebrew} → ${b.hebrew}`,
              theme:
                named?.theme ||
                "Gate theme coming soon — this path is waiting for learning.",
              tag:
                named?.tag ||
                "Unnamed gate · Add your own Torah as you learn.",
              sefariaUrl: named?.sefariaUrl || null,
              sefariaLabel: named?.sefariaLabel || ""
            });
          }
        }

        return gates;
      }

      const ALL_GATES = buildAllGates();

      // --- Render helpers -----------------------------------------------------
      const gateGrid = document.getElementById("gate-grid");
      const gateCount = document.getElementById("gate-count");
      const filterSelect = document.getElementById("filter-letter");

      // Populate filter dropdown with letters
      LETTERS.forEach((letter) => {
        const opt = document.createElement("option");
        opt.value = letter.code;
        opt.textContent = `${letter.latin} · ${letter.hebrew}`;
        filterSelect.appendChild(opt);
      });

      function renderGates(firstLetterCode = "all") {
        const filtered =
          firstLetterCode === "all"
            ? ALL_GATES
            : ALL_GATES.filter((g) => g.first.code === firstLetterCode);

        gateGrid.innerHTML = "";

        filtered.forEach((gate) => {
          const card = document.createElement("article");
          card.className = "gate-card";

          card.innerHTML = `
            <div class="gate-card-header">
              <div>
                <div class="gate-title">${gate.displayTitle}</div>
                <div class="gate-key-hebrew">${gate.hebrewPair}</div>
              </div>
              <div class="gate-key-latin">${gate.first.latin} → ${gate.second.latin}</div>
            </div>
            <div class="gate-theme">${gate.theme}</div>
          `;

          const meta = document.createElement("div");
          meta.className = "gate-meta";

          const tag = document.createElement("div");
          tag.className = "gate-tag";
          tag.textContent = gate.tag;
          meta.appendChild(tag);

          if (gate.sefariaUrl) {
            const link = document.createElement("a");
            link.className = "gate-link";
            link.href = gate.sefariaUrl;
            link.target = "_blank";
            link.rel = "noopener noreferrer";
            link.innerHTML = `
              <span>Open on Sefaria</span>
              <svg viewBox="0 0 20 20" aria-hidden="true">
                <path d="M5 10.5l1.4 1.4L9 9.3V15h2V9.3l2.6 2.6L15 10.5 10 5.5l-5 5z" fill="currentColor"></path>
              </svg>
            `;
            link.title = gate.sefariaLabel || "Open suggested source on Sefaria";

            meta.appendChild(link);
          }

          card.appendChild(meta);
          gateGrid.appendChild(card);
        });

        const total = ALL_GATES.length;
        const shown = filtered.length;

        if (firstLetterCode === "all") {
          gateCount.textContent = `Showing all ${shown} of ${total} gates.`;
        } else {
          const letter = LETTERS.find((l) => l.code === firstLetterCode);
          gateCount.textContent = `Showing ${shown} gates that begin with ${letter.latin} (${letter.hebrew}).`;
        }
      }

      filterSelect.addEventListener("change", (e) => {
        renderGates(e.target.value);
      });

      // Initial render
      renderGates("all");
    </script>
  </body>
</html>
